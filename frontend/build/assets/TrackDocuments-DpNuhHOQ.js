import{r as o,o as D,j as e}from"./index-CLNSMZLW.js";import{a as F}from"./axios-CCb-kr4I.js";import{F as m,b as L,g as A}from"./index-CjlhgdOE.js";/* empty css                   */import{C as M,a as E}from"./CCardBody-CfTsVxOj.js";import{C as H}from"./CCardHeader-DTDcNGzu.js";import{C as P,a as k}from"./CInputGroupText-i3xUTuxE.js";import{C as B}from"./CFormInput-tclTmhjH.js";import{C as x,a as u,b as c,c as t,d as j,e as r}from"./CTable-D0xi-Tgq.js";import{a as p}from"./index.esm-DtmDK9am.js";import{C as R,a as U,b as q,c as G}from"./CModalTitle-DQzvmFmJ.js";import"./CFormControlWrapper-xxYQpUFA.js";import"./CFormControlValidation-CHapmSMf.js";import"./CFormLabel-DPrUA8EZ.js";import"./DefaultLayout-HRgSVHY3.js";import"./CConditionalPortal-CNl-bRuG.js";const ne=()=>{const[C,f]=o.useState([]),[y,g]=o.useState(!1),[d,Q]=o.useState([]);o.useState(null);const[a,T]=o.useState(""),b=D();o.useEffect(()=>{(async()=>{try{const i=(await F.get("http://localhost:5000/api/get-trackers")).data;console.log("API Response Data:",i);const I=i.filter(l=>l.documentName),h=Array.from(new Map(I.map(l=>[l.documentId,l])).values());console.log("Unique Documents:",h),f(h)}catch(n){console.error("Error fetching trackers:",n)}})()},[]);const v=s=>{b(`/update-document/${s.documentId}`)},N=()=>g(!1),w=s=>{T(s.target.value)},S=C.filter(s=>s.documentId.toLowerCase().includes(a.toLowerCase())||s.documentName.toLowerCase().includes(a.toLowerCase())||s.belongsTo.toLowerCase().includes(a.toLowerCase()));return e.jsx("div",{className:"m-lg-4 m-xl-4",children:e.jsxs(M,{children:[e.jsx(H,{className:"text-center text-info",children:e.jsx("h4",{children:"Track Documents"})}),e.jsxs(E,{className:"m-lg-4 m-xl-4",children:[e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs(P,{style:{maxWidth:"300px"},children:[e.jsx(B,{type:"text",placeholder:"Search...",value:a,onChange:w}),e.jsx(k,{children:e.jsx(m,{icon:L})})]})}),e.jsxs(x,{bordered:!0,hover:!0,responsive:!0,children:[e.jsx(u,{children:e.jsxs(c,{children:[e.jsx(t,{children:"Document ID"}),e.jsx(t,{children:"Document Name"}),e.jsx(t,{children:"Belongs To"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Authority"}),e.jsx(t,{children:"Action"})]})}),e.jsx(j,{children:S.map(s=>e.jsxs(c,{children:[e.jsx(r,{children:s.documentId}),e.jsx(r,{children:s.documentName||"No Name"}),e.jsx(r,{children:s.belongsTo}),e.jsx(r,{style:{color:"green"},children:s.Status||"Not yet updated"}),e.jsx(r,{style:{color:"blue"},children:s.authority||"Not yet updated"}),e.jsx(r,{children:e.jsxs(p,{color:"secondary",onClick:()=>v(s),children:[e.jsx(m,{icon:A})," Update"]})})]},s.documentId))})]}),e.jsx(R,{visible:y,onClose:N,size:"lg",centered:!0,style:{display:"flex",alignItems:"center",justifyContent:"center",maxHeight:"90vh"},children:e.jsxs("div",{style:{maxHeight:"80vh",overflowY:"auto",width:"100%"},children:[e.jsx(U,{children:e.jsx(q,{children:"Associated Files"})}),e.jsx(G,{children:d.length>0?e.jsxs(x,{bordered:!0,hover:!0,responsive:!0,children:[e.jsx(u,{children:e.jsxs(c,{children:[e.jsx(t,{children:"No."}),e.jsx(t,{children:"Document Type"}),e.jsx(t,{children:"File Path"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Action"})]})}),e.jsx(j,{children:d.filter(s=>s.filePath!=="http://localhost:5000/uploads/undefined").map((s,n)=>e.jsxs(c,{children:[e.jsx(r,{children:n+1}),e.jsx(r,{children:s.documentType}),e.jsx(r,{children:s.filePath||"No File Path"}),e.jsx(r,{style:{color:"green"},children:s.Status||""}),e.jsx(r,{children:e.jsx(p,{color:"primary",href:s.filePath,target:"_blank",rel:"noopener noreferrer",children:"View"})})]},s._id))})]}):e.jsx("p",{children:"No files available."})})]})})]})]})})};export{ne as default};
