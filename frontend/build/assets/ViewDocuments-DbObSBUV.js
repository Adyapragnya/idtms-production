import{r as a,j as e}from"./index-CLNSMZLW.js";import{F as i,b as S,c as u}from"./index-CjlhgdOE.js";/* empty css                   */import{C as F,a as U}from"./CCardBody-CfTsVxOj.js";import{C as O}from"./CCardHeader-DTDcNGzu.js";import{C as k,a as E}from"./CInputGroupText-i3xUTuxE.js";import{C as H}from"./CFormInput-tclTmhjH.js";import{C as p,a as M,b as d,c,d as x,e as t}from"./CTable-D0xi-Tgq.js";import{a as j}from"./index.esm-DtmDK9am.js";import{C as V,a as B,b as $,c as R}from"./CModalTitle-DQzvmFmJ.js";import"./CFormControlWrapper-xxYQpUFA.js";import"./CFormControlValidation-CHapmSMf.js";import"./CFormLabel-DPrUA8EZ.js";import"./DefaultLayout-HRgSVHY3.js";import"./CConditionalPortal-CNl-bRuG.js";const te=()=>{const[y,D]=a.useState([]),[g,C]=a.useState(!1),[h,b]=a.useState({propertyDocuments:[],otherDocuments:[]}),[l,N]=a.useState("");a.useEffect(()=>{(async()=>{try{const r=await fetch("http://localhost:5000/api/get-documents");if(!r.ok)throw new Error("Network response was not ok");const f=await r.json();console.log(f);const w=f.reduce((m,n)=>(m[n.documentId]||(m[n.documentId]={documentId:n.documentId,dateOfUpload:n.dateOfUpload,documentType:n.documentType,documentName:n.documentName,belongsTo:n.belongsTo,contactNo:n.contactNo,propertyDocuments:n.propertyDocuments||[],otherDocuments:n.otherDocuments||[]}),m),{});console.log(Object.values(w)),D(Object.values(w))}catch(o){console.error("Error fetching documents:",o)}})()},[]);const T=s=>{const{propertyDocuments:o,otherDocuments:r}=s;b({propertyDocuments:o,otherDocuments:r}),C(!0)},v=()=>C(!1),L=s=>{N(s.target.value)},I=y.filter(s=>s.documentId.toLowerCase().includes(l.toLowerCase())||s.dateOfUpload.toLowerCase().includes(l.toLowerCase())||s.documentType.toLowerCase().includes(l.toLowerCase())||s.documentName.toLowerCase().includes(l.toLowerCase())||s.belongsTo.toLowerCase().includes(l.toLowerCase())||s.contactNo.toLowerCase().includes(l.toLowerCase()));return e.jsx("div",{className:"m-lg-4 m-xl-4",children:e.jsxs(F,{children:[e.jsx(O,{className:"text-center text-info",children:e.jsx("h4",{children:"View Documents"})}),e.jsxs(U,{className:"m-lg-4 m-xl-4",children:[e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs(k,{style:{maxWidth:"300px"},children:[e.jsx(H,{type:"text",placeholder:"Search...",value:l,onChange:L}),e.jsx(E,{children:e.jsx(i,{icon:S})})]})}),e.jsxs(p,{bordered:!0,hover:!0,responsive:!0,children:[e.jsx(M,{children:e.jsxs(d,{children:[e.jsx(c,{children:"ID"}),e.jsx(c,{children:"Date of Upload"}),e.jsx(c,{children:"Type"}),e.jsx(c,{children:"Name"}),e.jsx(c,{children:"Belongs To"}),e.jsx(c,{children:"Contact Number"}),e.jsx(c,{children:"View"})]})}),e.jsx(x,{children:I.slice().reverse().map(s=>e.jsxs(d,{children:[e.jsx(t,{children:s.documentId}),e.jsx(t,{children:s.dateOfUpload}),e.jsx(t,{children:s.documentType}),e.jsx(t,{children:s.documentName}),e.jsx(t,{children:s.belongsTo}),e.jsx(t,{children:s.contactNo}),e.jsx(t,{children:s.propertyDocuments.length>0||s.otherDocuments.length>0?e.jsxs(j,{color:"primary",onClick:()=>T({propertyDocuments:s.propertyDocuments,otherDocuments:s.otherDocuments}),children:[e.jsx(i,{icon:u})," View Files"]}):e.jsx("span",{children:"No Files"})})]},s.documentId))})]}),e.jsx(V,{visible:g,onClose:v,size:"lg",centered:!0,style:{display:"flex",alignItems:"center",justifyContent:"center",maxHeight:"90vh"},children:e.jsxs("div",{style:{maxHeight:"80vh",overflowY:"auto",width:"100%"},children:[e.jsx(B,{children:e.jsx($,{children:"Files"})}),e.jsxs(R,{children:[e.jsx("h5",{children:"Property Documents"}),e.jsx(p,{children:e.jsx(x,{children:h.propertyDocuments.map((s,o)=>e.jsxs(d,{children:[e.jsx(t,{children:o+1}),e.jsx(t,{children:s}),e.jsx(t,{className:"text-end",children:e.jsxs(j,{color:"primary",onClick:()=>{const r=`http://localhost:5000/${s}`;console.log(r),window.open(r,"_blank")},children:[e.jsx(i,{icon:u})," View"]})})]},o))})}),h.otherDocuments.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Other Documents"}),e.jsx(p,{children:e.jsx(x,{children:h.otherDocuments.map((s,o)=>e.jsxs(d,{children:[e.jsx(t,{children:o+1}),e.jsx(t,{children:s}),e.jsx(t,{className:"text-end",children:e.jsxs(j,{color:"primary",onClick:()=>{const r=`http://localhost:5000/uploads/${s}`;console.log(r),window.open(r,"_blank")},children:[e.jsx(i,{icon:u})," View"]})})]},o))})})]})]})]})})]})]})})};export{te as default};
